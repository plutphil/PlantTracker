<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Plant Growth Tracker</title>
  <link href="ext/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="s.css" />
  <style>
    body { padding-bottom: 5rem; }
    #plant-image { max-width: 100%; height: auto; }
  </style>
</head>
<body>
  <nav class="navbar fixed-top navbar-dark bg-success">
    <div class="container-fluid">
      <a class="navbar-brand" href="#" onclick="showMainScreen()">Plant Tracker</a>
      <div>
        <button class="btn btn-light btn-sm me-2" onclick="openSettings()">Settings</button>
        <button class="btn btn-light btn-sm" onclick="openAddPlantDialog()">+ Plant</button>
      </div>
    </div>
  </nav>

  <div class="container mt-5 pt-4" id="main-screen">
    <div class="row" id="plant-list"></div>
  </div>

  <div class="container mt-5 pt-4 d-none" id="plant-screen">
    <button class="btn btn-link" onclick="showMainScreen()">&#8592; Back</button>
    <h3 id="plant-title"></h3>
    <img id="plant-image" class="my-2" />
    <p><strong>Location:</strong> <span id="plant-location"></span></p>
    <p><strong>Size:</strong> <span id="plant-size"></span> cm</p>
    <canvas id="size-plot" height="150"></canvas>
    <hr />
    <h5>Logs</h5>
    <div id="log-list"></div>
    <button class="btn btn-success my-2" onclick="openAddLogDialog()">+ Add Log</button><br>
    <button class="btn btn-success mb-5" onclick="openAddSizeDialog()">+ Add Size</button><br>
    <!--<button class="btn btn-primary w-100 mb-3" onclick="capturePhoto(currentPlantId)">ðŸ“¸ Capture Photo</button>-->

  </div>

  <!-- Dialogs -->
  <div class="modal" id="dialog" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header"><h5 class="modal-title" id="dialog-title"></h5></div>
        <div class="modal-body" id="dialog-body"></div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" id="dialog-submit">Save</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Settings -->
  <div class="modal" id="settings-dialog" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header"><h5 class="modal-title">Settings</h5></div>
        <div class="modal-body">
          <p><strong>Storage usage:</strong> <span id="storage-usage">Calculating...</span></p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>


  <!-- Bootstrap Modal -->
  <div class="modal fade" id="cameraModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Take a Photo</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body text-center">
          <!-- Camera view -->
          <video id="video" width="100%" autoplay playsinline></video>
          <!-- Photo preview -->
          <img id="photoPreview" style="display:none; max-width:100%;" />
          <!-- Canvas for snapshot (hidden) -->
          <canvas id="canvas" style="display:none;"></canvas>
          
          <!-- Buttons -->
          <div id="controls" class="mt-3">
            <button id="captureBtn" class="btn btn-success">Capture</button>
            <div id="previewButtons" class="mt-3" style="display:none;">
              <button id="acceptBtn" class="btn btn-primary me-2">Accept</button>
              <button id="redoBtn" class="btn btn-secondary">Redo</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <script src="ext/bootstrap.bundle.min.js"></script>
  <script src="ext/chart.js"></script>
  <script src="camera.js"></script>
  <script src="main.js"></script>
</body>
</html>